@use "variables" as vars
@use "mixins" as mix
@use "sass:math"

// TODO Refactor with Notes
  
$window-width: 75rem
$window-height: 50rem
$sidebar-width: math.div($window-width, 4)
$min-sidebar-width: 17.1rem
$header-height: 5rem
$num-columns: 2
$artwork-height: 250px
$icon-size: 1.5rem
$primary-background: rgba(32, 36, 31, 0.9)
$secondary-background: rgb(30, 30, 30)
$sidebar-background: rgba(32, 36, 31, 0.2)
$sidebar-title-color: rgb(147, 148, 146)
$underline-color: rgba(147, 148, 146, 0.4)
$track-color: $sidebar-title-color
$active-track-color: vars.$secondary-button-color
$thumb-color: $primary-background
$thumb-border-color: $sidebar-title-color
$thumb-size: $icon-size
$track-height: 0.9rem
$track-border-radius: 0.25rem

#music-app
  flex-direction: column
  align-content: stretch
  @include mix.window(rgba(42, 45, 41, 0.6), $window-width, $window-height)
  display: flex // Temp for testing

  .body
    color: white
    width: 100%
    height: 100%
    overflow-x: hidden
    display: flex

    .sidebar
      width: $sidebar-width
      min-width: $min-sidebar-width
      height: 100%
      border-right: vars.$border-thickness solid rgb(11, 11, 11)
      @include mix.disable-select()

      &-header
        position: relative
        padding: vars.$padding-2x vars.$padding-2x vars.$padding-2x vars.$padding-3x
        height: $header-height
        background: $sidebar-background
        display: flex
        align-items: center
        justify-content: space-between

        .buttons
          @include mix.buttons()

      .content
        background: $sidebar-background
        overflow: auto
        height: calc(100% - $header-height)
        padding: 0 vars.$padding-2x

        .subtitle
          font-size: 1.2rem
          padding: vars.$padding 0
          font-weight: 700
          color: $sidebar-title-color
        
        .text
          color: white
          font-size: 1.3rem
          line-height: 1.75rem
          width: 100%
          position: relative
          padding: vars.$padding 0 vars.$padding vars.$padding-3x

          i
            color: vars.$secondary-button-color

        .active
          width: 100%
          border-radius: vars.$border-radius
          background-color: rgba(255, 255, 255, 0.15)

    .main
      flex: 1
      overflow: auto

      .c-playback
        height: $header-height
        width: 100%
        background: $primary-background
        display: grid // flex
        align-items: center
        justify-content: space-between
        backdrop-filter: blur(2rem)
        grid-template-columns: 0.7fr 1.1fr 1fr
        //max-width: 1500px
        border-bottom: vars.$border-thickness-half solid $underline-color
        
        i
          color: $sidebar-title-color
          font-size: $icon-size
          text-align: center

        &__controls
          display: inline-grid
          grid-template-columns: 1fr auto 1fr
          justify-items: center
          align-items: center
          justify-self: center
          grid-gap: vars.$padding-2x
          padding: 0 vars.$padding-one-and-half
                
          &__group
            display: grid
            grid-template-columns: 1fr 1fr 1fr
            grid-gap: vars.$padding-one-and-half

        &__lcd
          background-color: $sidebar-title-color
          padding: vars.$padding 0
          border-radius: vars.$border-radius
          // overflow: hidden
          text-align: center
          display: flex
          justify-content: center
          align-items: center
                
          i
            font-size: calc($icon-size * 1.5)
            color: white

        &__user
          display: flex
          justify-content: center
          align-items: center
          grid-gap: vars.$padding-one-and-half
          padding: 0 vars.$padding-2x

          // &__toggle
          //   appearance: none
          //   border: 0
          //   background: transparent

        &__random, &__repeat
          opacity: 0.5

      .c-input-slider
        display: flex
        align-items: center
        @include mix.disable-select()

        input[type=range]
          width: 100% // auto
          //max-width: 10rem
          background: transparent
          -webkit-appearance: none
          padding: 0 vars.$padding
          @include mix.disable-select()

          &::-moz-focus-outer
            border: 0
          
          &:focus
            outline: 0 // none

            &::-webkit-slider-runnable-track
              background: $track-color
            
            &::-ms-fill-upper
              background: $track-color

            &::-ms-fill-lower
              background: $track-color
            
          &:focus-visible
            outline: vars.$border-thickness solid $thumb-border-color
            outline-offset: vars.$border-thickness
                    
          &::-moz-range-thumb
            @include mix.thumb($thumb-color, $thumb-border-color, $thumb-size)
            
            &:hover
              background: $thumb-color
          
          &::-ms-thumb
            @include mix.thumb($thumb-color, $thumb-border-color, $thumb-size)
            margin-top: math.div($track-height, 4)

            &:hover
              background: $thumb-color

          &::-webkit-slider-thumb
            @include mix.thumb($thumb-color, $thumb-border-color, $thumb-size)
            -webkit-appearance: none
            margin-top: calc((#{$track-height} - #{$thumb-size}) / 2)

            &:hover
              background: $thumb-color
              
          &::-webkit-slider-runnable-track
            @include mix.track()
            background: $track-color
            border-radius: $track-border-radius

            &:active
              background: $active-track-color
          
          &::-moz-range-track
            @include mix.track()
            background: $track-color
            border-radius: $track-border-radius

            &:active
              background: $active-track-color
          
          &::-ms-track
            @include mix.track()
            animate: 0.2s
            background: transparent
            border-color: transparent
            border-width: math.div($thumb-size, 2) 0
            color: transparent
                    
          &::-ms-fill-upper
            background: $track-color
            border-radius: $track-border-radius

            &:active
              background: $active-track-color

          &::-ms-fill-lower
            background: $track-color
            border-radius: $track-border-radius

            &:active
              background: $active-track-color

          &:disabled
            opacity: 0.5

            &::-webkit-slider-thumb,
            &::-moz-range-thumb,
            &::-ms-thumb,
            &::-webkit-slider-runnable-track,
            &::-ms-fill-lower,
            &::-ms-fill-upper
              cursor: not-allowed
    
      &-body
        height: calc(100% - $header-height)
        background: $secondary-background
        width: 100%
        padding: vars.$padding vars.$padding-4x
        overflow: auto
        font-size: 1.4rem

        h1
          font-size: 2.25rem
          font-weight: 700

        hr
          border: 0
          height: vars.$border-thickness-half
          background-color: $underline-color
          margin-bottom: vars.$padding-2x

        img
          width: 100%

        .artworks
          display: grid
          grid-template-columns: repeat($num-columns, 1fr)
          gap: vars.$padding-2x
      
        .artwork
          border-radius: vars.$border-radius
          overflow: hidden
          position: relative
          height: $artwork-height
        
          &__bg
            height: 100%
            width: 100%
            background: var(--img) no-repeat center
            background-size: cover
        
          &__details
            position: absolute
            overflow: hidden
            width: 100%
            text-align: center
            background-color: rgba(255, 255, 255, 0.5)
            backdrop-filter: blur(1rem)
            bottom: 0
            padding: vars.$padding-4x 0
            border-radius: 0 0 vars.$border-radius vars.$border-radius
        
            &-inner
              width: 100%
              display: flex
              align-items: center
              flex-direction: column
              justify-content: center
        
          &-artist
            font-weight: 500
            letter-spacing: 0.05rem
        
          &-song
            font-weight: 300