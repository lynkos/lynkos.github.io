"use strict";var uniforms,containerEl=document.querySelector(".container"),canvasEl=document.querySelector("canvas#neuro"),devicePixelRatio=Math.min(window.devicePixelRatio,2),pointer={x:0,y:0,tX:0,tY:0},gl=initShader();setupEvents(),resizeCanvas(),window.addEventListener("resize",resizeCanvas),render();function initShader(){function a(a,b,c){var d=a.createShader(c);return a.shaderSource(d,b),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.error("An error occurred compiling the shaders: "+a.getShaderInfoLog(d)),a.deleteShader(d),null)}function b(a){for(var b,c=[],d=e.getProgramParameter(a,e.ACTIVE_UNIFORMS),f=0;f<d;f++)b=e.getActiveUniform(a,f).name,c[b]=e.getUniformLocation(a,b);return c}var c=document.getElementById("vertShader").innerHTML,d=document.getElementById("fragShader").innerHTML,e=canvasEl.getContext("webgl")||canvasEl.getContext("experimental-webgl");e||alert("WebGL is not supported by your browser.");var f=a(e,c,e.VERTEX_SHADER),g=a(e,d,e.FRAGMENT_SHADER),h=function d(a,b,c){var e=a.createProgram();return a.attachShader(e,b),a.attachShader(e,c),a.linkProgram(e),a.getProgramParameter(e,a.LINK_STATUS)?e:(console.error("Unable to initialize the shader program: "+a.getProgramInfoLog(e)),null)}(e,f,g);uniforms=b(h);var i=new Float32Array([-1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,1,1,1]),j=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,j),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.useProgram(h);var k=e.getAttribLocation(h,"a_position");return e.enableVertexAttribArray(k),e.bindBuffer(e.ARRAY_BUFFER,j),e.vertexAttribPointer(k,2,e.FLOAT,!1,0,0),e}function render(){var a=performance.now();pointer.x+=.5*(pointer.tX-pointer.x),pointer.y+=.5*(pointer.tY-pointer.y),gl.uniform1f(uniforms.u_time,a),gl.uniform2f(uniforms.u_pointer_position,pointer.x/window.innerWidth,1-pointer.y/window.innerHeight),gl.uniform1f(uniforms.u_scroll_progress,window.scrollY/(2*window.innerHeight)),gl.drawArrays(gl.TRIANGLE_STRIP,0,4),requestAnimationFrame(render)}function resizeCanvas(){canvasEl.width=window.innerWidth*devicePixelRatio,canvasEl.height=window.innerHeight*devicePixelRatio,gl.uniform1f(uniforms.u_ratio,canvasEl.width/canvasEl.height),gl.viewport(0,0,canvasEl.width,canvasEl.height)}function setupEvents(){function a(a,b){pointer.tX=a,pointer.tY=b}window.addEventListener("pointermove",function(b){a(b.clientX,b.clientY)}),window.addEventListener("touchmove",function(b){a(b.targetTouches[0].clientX,b.targetTouches[0].clientY)}),window.addEventListener("click",function(b){a(b.clientX,b.clientY)})}var app=new Vue({el:"#mount",data:function a(){return{wdo:{},title:"Arrow Glaze",aero:{basic:!1,transparency:CSS.supports("color","rgba(0,0,0,0.5)"),blur:CSS.supports("backdrop-filter","blur(1px)"),css:{boxShadow:!0,overflowHidden:!0,dropShadowFilter:!1}},showSidebar:!1}},beforeDestroy:function a(){this.wdo.destroy()}});$(".window").draggable({handle:".titlebar",containment:"#mount"});